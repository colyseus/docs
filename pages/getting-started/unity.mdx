import { unity } from "../../components/icons/platforms"
import { Callout, Steps, Tabs } from 'nextra/components'
import { PeopleIcon, DevicesIcon } from '@primer/octicons-react'

# Unity SDK

## Install package

<Tabs items={['Unity Package Manager (UPM)', 'From .unitypackage (legacy)']}>
    <Tabs.Tab>
        - Go to **Window → Package Management → Package Manager**. Click "+" button, then select "Add package from git URL..."
        - Enter Git URL: `https://github.com/colyseus/colyseus-unity-sdk.git#upm`
        - Click "ADD"

        Click to import the example project in order to test the built-in demonstration.
    </Tabs.Tab>

    <Tabs.Tab>
        - Download the latest [Colyseus Unity SDK](https://github.com/colyseus/colyseus-unity3d/releases/latest/download/Colyseus_Plugin.unitypackage)
        - Import the `Colyseus_Plugin.unitypackage` contents into your project.

        The `Colyseus_Plugin.unitypackage` contains an example project under `Assets/Colyseus/Example` you can use as a reference.
    </Tabs.Tab>
</Tabs>

---

### Testing from Unity Editor

Starting with Unity 6000.1.0b1, Unity integrates [Multiplayer Play Mode](https://docs-multiplayer.unity3d.com/mppm/current/about/), enabling you to test your Colyseus-based multiplayer game with multiple clients directly within the Unity Editor, without needing to build the application.

- See how to install [Multiplayer Play Mode](https://docs-multiplayer.unity3d.com/mppm/current/install/)
- Alternatively, you can use [ParrelSync](https://github.com/VeriorPies/ParrelSync) for older versions of Unity.

## SDK Example Project

The example project [included in the SDK package](https://github.com/colyseus/colyseus-unity-sdk/tree/master/Assets/Colyseus/Runtime/Example~) does not contain any visual components or UI. It contain the majority of important method calls you would be using in a real-world application.

![Import Example](/getting-started/unity-sdk-import-example.png)

- Joining into a custom room with Messages and State Synchronization
- Joining into a [<PeopleIcon/> LobbyRoom](/room/built-in/lobby) and listening to its messages
- Joining into a [<PeopleIcon/> QueueRoom](/room/built-in/queue) and listening to its messages
- [Consuming a seat reservation](/sdk#consume-seat-reservation) from QueueRoom and joining into the match room

### Running the test server locally

To run the test server locally, you will need to run the following commands in your terminal:

```sh filename="Terminal"
git clone https://github.com/colyseus/colyseus.git
cd colyseus
pnpm install
pnpm run sdk-test-server
```

<Callout type="warning">
    This test server is meant for testing features of the SDKs only. It does not follow good standards for production servers. For your own production servers, you should start from a fresh project and follow the [Getting Started](/getting-started#backend) guide.
</Callout>

<Callout type="info">
    You can see the source code for the test server [here](https://github.com/colyseus/colyseus/blob/master/packages/example/src/sdks.server.ts).
</Callout>

You should be able to see the server running at `http://localhost:2567`, and the example project will be able to connect to it.

## SDK API

Navigate to the [<DevicesIcon/> Client SDK](/sdk) for API Reference, and select the **C# (Unity)** tab.

## Debugging

### Editor Debug Panel (experimental)

The editor debug panel allows you to inspect the room state and messages in real-time during development, simulate high latency conditions, connection drops, and more.

You can enable the Editor Debug Panel at **Window → Colyseus → Room Inspector**

![Editor Debug Panel](/getting-started/unity-sdk-debug.png)

### Breakpoints

If you set a breakpoint in your application while the WebSocket connection is open, the connection will be closed automatically after 3 seconds due to inactivity. To prevent the WebSocket connection from dropping, use `pingInterval: 0` during development:

```ts filename="app.config.ts"
import { defineServer } from "colyseus";
import { WebSocketTransport } from "@colyseus/ws-transport";

const server = defineServer({
    // ...
    transport: new WebSocketTransport({
        pingInterval: 0, // <--- HERE
    }),
    // ...
});
```

Make sure to have a `pingInterval` higher than `0` on production. The default `pingInterval` value is `3000`.
